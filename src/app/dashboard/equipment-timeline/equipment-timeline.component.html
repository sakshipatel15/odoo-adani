<div class="card border-0 shadow-sm rounded-4 h-100">
    <div class="card-header bg-white border-0 pt-4 pb-0 px-4 d-flex justify-content-between align-items-start">
        <div>
            <h5 class="mb-1 fw-bold text-dark">Equipment History</h5>
            <small class="text-muted d-flex align-items-center gap-1">
                {{ equipmentName }} â€¢ <span class="text-warning fw-semibold">{{ equipmentStatus }}</span>
            </small>
        </div>
        <button class="btn btn-link text-muted p-0 text-decoration-none">
            <span class="material-icons">more_vert</span>
        </button>
    </div>

    <div class="card-body px-0 pt-2 pb-0">
        <div class="timeline-container px-4">
            <div *ngFor="let item of timelineItems; let last = last"
                class="timeline-item d-flex position-relative pb-4">

                <!-- Connector Line -->
                <div class="timeline-line" *ngIf="!last"></div>

                <!-- Icon -->
                <div class="timeline-icon me-3">
                    <div class="icon-circle d-flex align-items-center justify-content-center" [ngClass]="{
                 'bg-white border border-warning text-warning': item.type === 'critical',
                 'bg-light text-dark': item.type !== 'critical'
               }">
                        <!-- Specific styling logic: Critical gets an outlined warning loop, others generic gray bg -->
                        <!-- Fixing icon logic to better match image:
                  Critical: Orange outline circle, orange icon.
                  Others: Light gray circle, dark gray icon. 
             -->
                        <span class="material-icons" style="font-size: 18px;">{{ item.icon }}</span>
                    </div>
                </div>

                <!-- Content -->
                <div class="timeline-content w-100">
                    <div class="d-flex justify-content-between align-items-start mb-1">
                        <h6 class="mb-0 fw-bold text-dark">{{ item.title }}</h6>
                        <span *ngIf="item.badge"
                            class="badge bg-danger-subtle text-danger border border-danger-subtle ms-2 rounded-1 px-2">
                            {{ item.badge }}
                        </span>
                    </div>

                    <div *ngIf="item.meta" class="text-muted small mb-1">{{ item.meta }}</div>

                    <div *ngIf="item.description" class="text-muted small text-wrap mb-1" style="line-height: 1.4;">
                        {{ item.description }}
                    </div>

                    <small class="text-warning fw-medium" *ngIf="item.type === 'critical'">
                        <span class="material-icons align-middle" style="font-size: 14px;">watch_later</span> {{
                        item.time }}
                    </small>
                    <small class="text-muted" *ngIf="item.type !== 'critical'">
                        {{ item.time }}
                    </small>
                </div>
            </div>
        </div>
    </div>

    <div class="card-footer bg-white border-0 px-4 pb-4 pt-0">
        <button class="btn btn-warning w-100 text-white fw-semibold py-2 rounded-pill shadow-sm custom-orange-btn">
            View Full History
        </button>
    </div>
</div>